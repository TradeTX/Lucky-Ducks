<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Win $5</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Acme" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="home.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
</head>
<script>
var audio = new Audio("music/gamemusic.mp3");
audio.play();

$(document).ready(function() {


    function newGame() {

        var randomDucks = [];
        var arrayMax = 250;
        var counter = 7;
        var limit = arrayMax + 1;
        var userWins = 0;
        var userLosses = 0;

        for (var i = 0; i < arrayMax; i++) {
            randomDucks.push(Math.floor(Math.random() * limit));
        }


        randomDucks.sort(function(a, b) { return 0.5 - Math.random() });


        randomDucks.sort(function(a, b) { return 0.5 - Math.random() });


        randomDucks.sort(function(a, b) { return 0.5 - Math.random() });


        randomDucks.sort(function(a, b) { return 0.5 - Math.random() });

        for (var i = 0; i < randomDucks.length; i++) {
            var mainRow = $("#main-row")
            var duckImage = $("<img>");
            duckImage.addClass("duck-image").addClass("animated pulse infinite")
                .attr("src", "img/circleduck.png")
                .attr("duck-value", randomDucks[i]);
            duckImage.appendTo(mainRow);
        }

        $(".duck-image").on("click", function() {
            var quack = new Audio("music/quack.mp3");
            quack.play();
            var userDuck = ($(this).attr("duck-value"));
            userDuck = parseInt(userDuck);
            var userImage = ($(this).attr("src", "img/circleduck.png"))
            // counter--;
            if (counter--) {
                $("#top").text("Wrong duck! You have " + counter + " clicks left!");
                userImage.attr("src", "img/redx.png");
            };

            if (counter === 0 && userDuck !== 1) {
                userLosses++;
                window.location.href = "loser.html"
            } else if (userDuck === 1) {
                userWins++;
                window.location.href = "winner.html"
            }

        })
        console.log("Losses: " + userLosses + ", Wins: " + userWins)
    }

    newGame()

})
</script>

<body>
    <div class="container text-center">
        <div class="header">
            <br>
            <img src="img/luckylogo.png">
            <img src="img/duck.png" height=90px; width=65px>
            <div class="row" id="top">
                <p><strong>Click on the Lucky Duck!<br></strong></p>
            </div>
            <hr>
        </div>
        <div id="main-row" class="row">
        </div>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112540659-2"></script>
        <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-112540659-2');
        </script>
</body>

</html>